(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{d843:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-md"},[s("q-table",{attrs:{title:e.$t("user.User"),data:e.data,columns:e.columns,"row-key":"name",filter:e.filter,color:"primary",loading:e.loading},scopedSlots:e._u([{key:"top",fn:function(t){return[s("q-btn",{attrs:{color:"primary",label:e.$t("user.new"),"no-caps":""},on:{click:e.AddNewUser}}),s("q-space"),s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:e.$t("Search"),filled:""},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),s("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}},{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:t}},[e._v("\n          "+e._s(a.label)+"\n        ")])})),s("q-th",{attrs:{align:"center"}},[e._v(e._s(e.$t("action")))])],2)]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(a){return s("q-td",{key:a.name,attrs:{props:t}},[e._v("\n          "+e._s(a.value)+"\n        ")])})),s("q-td",{attrs:{"auto-width":""}},[s("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"edit"},on:{click:function(s){return e.editRow(t)}}}),s("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"delete"},on:{click:function(s){return e.deleteRow(t)}}})],1)],2)]}},{key:"loading",fn:function(){return[s("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0}])}),s("q-dialog",{attrs:{"full-width":"","full-height":"",maximized:!0},model:{value:e.createusermodal,callback:function(t){e.createusermodal=t},expression:"createusermodal"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.modaltitle))]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-card-section",[s("div",[s("div",{staticClass:"q-pa-md"},[s("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit,reset:e.onReset}},[s("q-input",{attrs:{label:e.$t("user.user_name"),readonly:!e.create,"lazy-rules":"",rules:[function(t){return t&&t.length>2||e.$t("Please type user name at least 2 characters")}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("q-input",{attrs:{label:e.$t("User password"),type:"password","lazy-rules":"",rules:[function(t){return t&&t.length>=8||e.$t("Please type your password at least 8 characters")}]},scopedSlots:e._u([{key:"hint",fn:function(){return[s("p",{staticStyle:{"font-size":"13px","text-align":"left"}},[e._v(e._s(e.$t("password strength")))]),s("div",{staticClass:"fixed-left",staticStyle:{float:"left",width:"100%","margin-left":"-32%"}},[s("password",{attrs:{"strength-meter-only":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("q-input",{attrs:{label:e.$t("Verify your password"),type:"password","lazy-rules":"",rules:[function(t){return t&&t.length>=8||e.$t("Please retype your password at least 8 characters")}],error:!e.isValid,"error-message":e.$t("Password and verify password must equal")},model:{value:e.password_verify,callback:function(t){e.password_verify=t},expression:"password_verify"}}),s("q-input",{attrs:{label:e.$t("Email address"),type:"email",readonly:!e.create,"lazy-rules":"",rules:[function(t){return t&&t.length>0||e.$t("Please input your email address")}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("div",[s("q-btn",{attrs:{label:e.$t("Submit"),type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:e.$t("Reset"),type:"reset",color:"primary",flat:""}})],1)],1)],1)])])],1)],1)],1)},n=[],o=(s("ac6a"),s("cadf"),s("06db"),s("456d"),s("7f7f"),s("f20a")),r=s.n(o),i={name:"User",components:{Password:r.a},watch:{createusermodal:function(e,t){!0!==!this.create&&this.onReset()}},computed:{modaltitle:{get:function(){return this.create?this.create_title:this.update_title},set:function(e){this.modaltitle=e}},isValid:function(){return this.password===this.password_verify}},data:function(){return{columns:[{name:"username",align:"center",label:this.$t("user.table.columns.username.label"),field:"username",sortable:!0},{name:"email",align:"center",label:this.$t("user.table.columns.email.label"),field:"email",sortable:!0}],filter:"",data:[],name:null,password:null,password_verify:null,email:null,create:!0,id:null,createusermodal:!1,create_title:this.$t("user.create_user"),update_title:this.$t("user.update_user"),loading:!1}},methods:{editRow:function(e){this.create=!1,this.name=e.row.username,this.email=e.row.email,this.id=e.row.id,this.createusermodal=!0},deleteRow:function(e){var t=this;this.$q.dialog({title:this.$t("Confirm"),message:"".concat(this.$t("user.delete_user",{username:e.row.username})," ?"),cancel:!0,persistent:!0,ok:{push:!0,color:"negative"}}).onOk((function(){t.deleteUser("".concat(e.row.id),"".concat(e.row.username))}))},AddNewUser:function(){this.create=!0,this.createusermodal=!0},onSubmit:function(){this.password_verify===this.password?this.create?this.createUser({username:this.name,password:this.password,password1:this.password_verify,email:this.email}):this.updateUser(this.id):this.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:"".concat(this.$t("user.password_validation")),timeout:5e3,position:"top"})},onReset:function(){this.name=null,this.email=null,this.password=null,this.password_verify=null},fetchdata:function(){var e=this;e.loading=!0,this.$axios.get("/common/api/users/").then((function(t){e.data=t.data,e.loading=!1})).catch((function(t){console.log(t),e.loading=!1}))},deleteUser:function(e,t){var s=this;this.$axios.delete("/common/api/users/".concat(e,"/")).then((function(e){s.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(s.$t("user.delete_user_success",{username:t})," !"),timeout:2e3,position:"top"}),s.fetchdata()})).catch((function(e){console.log(e);var t=[];e.response.data instanceof Object===!0&&Object.keys(e.response.data).map((function(s){"non_field_errors"===s?t.push("".concat(e.response.data[s])):t.push("".concat(s,": ").concat(e.response.data[s]))})),t.map((function(e){s.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:e,timeout:5e3,position:"top"})}))}))},updateUser:function(e){var t=this;this.$axios.patch("/common/api/users/".concat(e,"/"),{password:t.password,password1:t.password_verify}).then((function(e){t.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(t.$t("user.update_user_success",{username:t.name})," !"),timeout:2e3,position:"top"}),t.createusermodal=!1,t.fetchdata()})).catch((function(e){console.log(e);var s=[];e.response.data instanceof Object===!0&&Object.keys(e.response.data).map((function(t){"non_field_errors"===t?s.push("".concat(e.response.data[t])):s.push("".concat(t,": ").concat(e.response.data[t]))})),s.map((function(e){t.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:e,timeout:5e3,position:"top"})}))}))},createUser:function(e){var t=this;this.$axios.post("/common/api/users/",e).then((function(s){t.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(t.$t("user.create_user_success",{username:e.username})," !"),timeout:2e3,position:"top"}),t.createusermodal=!1,t.fetchdata()})).catch((function(e){var s=[];e.response.data instanceof Object===!0&&Object.keys(e.response.data).map((function(t){"non_field_errors"===t?s.push("".concat(e.response.data[t])):s.push("".concat(t,": ").concat(e.response.data[t]))})),s.map((function(e){t.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:e,timeout:5e3,position:"top"})}))}))}},created:function(){this.fetchdata()}},l=i,c=s("2877"),u=s("eaac"),d=s("9c40"),p=s("2c91"),m=s("27f9"),f=s("0016"),h=s("bd08"),y=s("357e"),w=s("db86"),b=s("74f7"),g=s("24e8"),v=s("f09f"),_=s("a370"),q=s("0378"),$=s("7f67"),x=s("eebe"),k=s.n(x),C=Object(c["a"])(l,a,n,!1,null,"6f1e9c9f",null);t["default"]=C.exports;k()(C,"components",{QTable:u["a"],QBtn:d["a"],QSpace:p["a"],QInput:m["a"],QIcon:f["a"],QTr:h["a"],QTh:y["a"],QTd:w["a"],QInnerLoading:b["a"],QDialog:g["a"],QCard:v["a"],QCardSection:_["a"],QForm:q["a"]}),k()(C,"directives",{ClosePopup:$["a"]})}}]);