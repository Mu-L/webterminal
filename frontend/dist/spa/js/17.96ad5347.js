(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"41a4":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"q-pa-md"},[o("q-table",{attrs:{title:e.$t("credential.Credential"),data:e.data,columns:e.columns,"row-key":"name",filter:e.filter,loading:e.loading},scopedSlots:e._u([{key:"top",fn:function(t){return[o("q-btn",{attrs:{color:"primary",label:e.$t("credential.new"),"no-caps":""},on:{click:e.AddNewCredential}}),o("q-space"),o("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:e.$t("Search"),color:"primary",filled:""},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),o("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}},{key:"header",fn:function(t){return[o("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(s){return o("q-th",{key:s.name,attrs:{props:t}},[e._v("\n          "+e._s(s.label)+"\n        ")])})),o("q-th",{attrs:{align:"center"}},[e._v(e._s(e.$t("action")))])],2)]}},{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(s){return o("q-td",{key:s.name,attrs:{props:t}},[e._v("\n          "+e._s(s.value)+"\n        ")])})),o("q-td",{attrs:{"auto-width":""}},[o("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"edit"},on:{click:function(o){return e.editRow(t)}}}),o("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"delete"},on:{click:function(o){return e.deleteRow(t)}}})],1)],2)]}},{key:"loading",fn:function(){return[o("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0}])}),o("q-dialog",{attrs:{"full-width":"","full-height":"",maximized:!0},model:{value:e.createcredentialmodal,callback:function(t){e.createcredentialmodal=t},expression:"createcredentialmodal"}},[o("q-card",[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6"},[e._v(e._s(e.modaltitle))]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),o("q-card-section",[o("div",{staticClass:"q-pa-md"},[o("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit,reset:e.onReset}},[o("q-input",{attrs:{label:e.$t("Credential name"),hint:e.$t("Credential name"),"lazy-rules":"",rules:[function(t){return t&&t.length>0||e.$t("Please type your credential name")}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),o("q-select",{attrs:{"use-input":"","input-debounce":"0",label:e.$t("Protocol"),options:e.options,"aria-required":"true"},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[e._v("\n                    No results\n                  ")])],1)]},proxy:!0}]),model:{value:e.protocol,callback:function(t){e.protocol=t},expression:"protocol"}}),o("q-input",{attrs:{label:e.$t("User name"),hint:e.$t("User name"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please input user name"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),o("q-toggle",{directives:[{name:"show",rawName:"v-show",value:e.usekey_show,expression:"usekey_show"}],attrs:{label:e.$t("Use ssh key")},model:{value:e.usekey,callback:function(t){e.usekey=t},expression:"usekey"}}),o("q-select",{directives:[{name:"show",rawName:"v-show",value:"rdp"===e.protocol,expression:"protocol === 'rdp'"}],attrs:{"use-input":"","input-debounce":"0",label:e.$t("Security"),options:e.security_options},on:{filter:e.filterSecurityFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[e._v("\n                    No results\n                  ")])],1)]},proxy:!0}]),model:{value:e.security,callback:function(t){e.security=t},expression:"security"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.key_show,expression:"key_show"}],attrs:{label:e.$t("User Key"),hint:e.$t("User Key"),type:"textarea",rules:[e.ValidateKey]},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),o("q-toggle",{directives:[{name:"show",rawName:"v-show",value:e.use_key_paword_show,expression:"use_key_paword_show"}],attrs:{label:e.$t("Use key password")},model:{value:e.usekeypassword,callback:function(t){e.usekeypassword=t},expression:"usekeypassword"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.password_show,expression:"password_show"}],attrs:{label:e.password_label,hint:e.password_label,type:"password",rules:[e.ValidatePassword]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("q-input",{attrs:{type:"number",label:e.$t("Port"),"lazy-rules":"",rules:[function(t){return null!==t&&""!==t||e.$t("Please type a valid port value")},function(t){return t<=65535||e.$t("Please type a valid port value")}]},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.width_show,expression:"width_show"}],attrs:{type:"number",label:e.$t("Width"),"lazy-rules":"",rules:[function(t){return null!==t&&""!==t||e.$t("Please type a valid width value")},function(t){return t>=0||e.$t("Please type a valid width value")}]},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.height_show,expression:"height_show"}],attrs:{type:"number",label:e.$t("Height"),"lazy-rules":"",rules:[function(t){return null!==t&&""!==t||e.$t("Please type a valid height value")},function(t){return t>=0||e.$t("Please type a valid height value")}]},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:"rdp"===e.protocol,expression:"protocol === 'rdp'"}],attrs:{type:"number",label:e.$t("Dpi"),"lazy-rules":"",rules:[function(t){return null!==t&&""!==t||e.$t("Please type a valid dpi value")},function(t){return t<=100||e.$t("Please type a valid dpi value")}]},model:{value:e.dpi,callback:function(t){e.dpi=t},expression:"dpi"}}),o("q-toggle",{attrs:{label:e.$t("Use proxy")},model:{value:e.useproxy,callback:function(t){e.useproxy=t},expression:"useproxy"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.useproxy_show,expression:"useproxy_show"}],attrs:{label:e.$t("Proxy server ip"),hint:e.$t("Proxy server ip"),rules:[e.ValidateProxyServer]},model:{value:e.proxy_server,callback:function(t){e.proxy_server=t},expression:"proxy_server"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.useproxy_show,expression:"useproxy_show"}],attrs:{type:"number",label:e.$t("Proxy server port"),rules:[e.ValidateProxyPort]},model:{value:e.proxy_port,callback:function(t){e.proxy_port=t},expression:"proxy_port"}}),o("q-input",{directives:[{name:"show",rawName:"v-show",value:e.useproxy_show,expression:"useproxy_show"}],attrs:{label:e.$t("Proxy password"),hint:e.$t("Proxy password"),type:"password",rules:[e.ValidateProxyPassword]},model:{value:e.proxy_password,callback:function(t){e.proxy_password=t},expression:"proxy_password"}}),o("div",[o("q-btn",{attrs:{label:e.$t("Submit"),type:"submit",color:"primary"}}),o("q-btn",{staticClass:"q-ml-sm",attrs:{label:e.$t("Reset"),type:"reset",color:"primary",flat:""}})],1)],1)],1)])],1)],1)],1)},r=[],a=(o("ac6a"),o("cadf"),o("456d"),o("7f7f"),o("551c"),o("06db"),["ssh","telnet","vnc","rdp"]),i=["rdp","nla","tls","any"],n={name:"Credential",data:function(){return{columns:[{name:"name",align:"center",label:this.$t("credential.table.columns.name.label"),field:"name",sortable:!0},{name:"username",align:"center",label:this.$t("credential.table.columns.username.label"),field:"username",sortable:!0},{name:"protocol",align:"center",label:this.$t("credential.table.columns.protocol.label"),field:"protocol",sortable:!0},{name:"port",align:"center",label:this.$t("credential.table.columns.port.label"),field:"port",sortable:!0}],data:[],createcredentialmodal:!1,name:null,width:1024,height:768,dpi:96,username:null,password:null,key:null,usekey:!1,usekeypassword:!1,protocol:"ssh",port:22,useproxy:!1,proxy_server:null,proxy_port:null,proxy_password:null,security:"any",useproxy_show:!1,width_show:!1,height_show:!1,options:a,security_options:i,filter:"",loading:!1,create:!0,id:null,create_title:this.$t("credential.create_credential"),update_title:this.$t("credential.update_credential")}},computed:{modaltitle:{get:function(){return this.create?this.create_title:this.update_title},set:function(e){this.modaltitle=e}},key_show:function(){return!("ssh"!==this.protocol||!this.usekey)},usekey_show:function(){return"ssh"===this.protocol},use_key_paword_show:function(){return!("ssh"!==this.protocol||!this.usekey)},password_show:function(){return"ssh"!==this.protocol||(!this.usekey||!!this.usekeypassword)},password_label:function(){return"ssh"===this.protocol&&this.usekey?this.$t("Auth key password"):this.$t("User password")}},watch:{useproxy:function(e){this.useproxy_show=!!e},protocol:function(e){!0===this.create&&("ssh"===e?(this.port=22,this.width_show=!1,this.height_show=!1):"telnet"===e?(this.port=23,this.width_show=!1,this.height_show=!1):"rdp"===e?(this.port=3389,this.width_show=!0,this.height_show=!0):"vnc"===e?(this.port=5901,this.width_show=!0,this.height_show=!0):(this.width_show=!1,this.height_show=!1))}},methods:{ValidatePassword:function(e){var t=this;if(!this.usekey)return new Promise((function(o,s){o(!!e||t.$t("Please type your password"))}))},ValidateKey:function(e){var t=this;if(this.usekey)return new Promise((function(o,s){o(!!e||t.$t("Please type your key"))}))},ValidateProxyServer:function(e){var t=this;if(this.useproxy)return new Promise((function(o,s){o(!!e||t.$t("Please type your server ip"))}))},ValidateProxyPort:function(e){var t=this;if(this.useproxy)return new Promise((function(o,s){o(e<=65535||t.$t("Please type a valid proxy port"))}))},ValidateProxyPassword:function(e){var t=this;if(this.useproxy)return new Promise((function(o,s){o(!!e||t.$t("Please type your proxy password"))}))},editRow:function(e){this.onReset(),this.id=e.row.id,this.create=!1,this.createcredentialmodal=!0,this.name=e.row.name,this.width=e.row.width,this.height=e.row.height,this.dpi=e.row.dpi,this.username=e.row.username,this.password=e.row.password,this.key=e.row.key,"ssh-password"===e.row.protocol&&(this.protocol="ssh"),"ssh-key"===e.row.protocol&&(this.protocol="ssh",this.usekey=!0),"ssh-key-with-password"===e.row.protocol&&(this.protocol="ssh",this.usekey=!0,this.usekeypassword=!0),"vnc"===e.row.protocol&&(this.protocol="vnc",this.usekey=!1),"rdp"===e.row.protocol&&(this.protocol="rdp",this.usekey=!1),"telnet"===e.row.protocol&&(this.protocol="telnet",this.usekey=!1),(e.row.proxy_server||e.row.proxy_port||e.row.proxy_password)&&(this.useproxy=!0),this.port=e.row.port,this.useproxy=e.row.useproxy,this.proxy_server=e.row.proxy_server,this.proxy_port=e.row.proxy_port,this.proxy_password=e.row.proxy_password,this.security=e.row.security},deleteRow:function(e){var t=this;this.$q.dialog({title:this.$t("Confirm"),message:"".concat(this.$t("credential.delete_credential",{name:e.row.name})," ?"),cancel:!0,persistent:!0,ok:{push:!0,color:"negative"}}).onOk((function(){t.deleteCredential(e.row.id,e.row.name)}))},AddNewCredential:function(){this.create=!0,this.onReset(),this.createcredentialmodal=!0},onSubmit:function(){var e=Object();e.name=this.name,e.username=this.username,e.port=this.port,e.method="password","ssh"===this.protocol?this.usekey?(this.usekeypassword?(e.protocol="ssh-key-with-password",e.password=this.password,e.method="key-with-password"):(e.protocol="ssh-key",e.method="key",e.password=null),e.key=this.key):(e.protocol="ssh-password",e.password=this.password,e.key=null):"telnet"===this.protocol?(e.protocol=this.protocol,e.password=this.password):(e.width=this.width,e.height=this.height,e.dpi=this.dpi,e.protocol=this.protocol,e.password=this.password,"rdp"===this.protocol&&(e.security=this.security)),this.useproxy&&(e.proxy_password=this.proxy_password,e.proxy_port=this.proxy_port,e.proxy_server=this.proxy_server),this.create?this.createCredential(e):this.updateCredential(this.id,e)},onReset:function(){this.name=null,this.username=null,this.width=1024,this.height=768,this.dpi=96,this.password=null,this.usekey=!1,this.key=null,this.port=22,this.useproxy_show=!1,this.useproxy=!1,this.proxy_password=null,this.proxy_server=null,this.proxy_password=null,this.proxy_port=null,this.security="any",this.protocol="ssh",this.usekeypassword=!1},filterFn:function(e,t){var o=this;t(""!==e?function(){var t=e.toLowerCase();o.options=a.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}:function(){o.options=a})},filterSecurityFn:function(e,t){var o=this;t(""!==e?function(){var t=e.toLowerCase();o.security_options=i.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}:function(){o.security_options=i})},fetchData:function(){var e=this;this.$axios.get("/common/api/credential/").then((function(t){e.data=t.data})).catch((function(e){console.log(e)}))},createCredential:function(e){var t=this;this.$axios.post("/common/api/credential/",e).then((function(o){t.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(t.$t("credential.create_credential_success",{name:e.name})," !"),timeout:2e3,position:"top"}),t.createcredentialmodal=!1,t.fetchData()})).catch((function(e){console.log(e);var o=[];e.response.data instanceof Object===!0&&Object.keys(e.response.data).map((function(t){"non_field_errors"===t?o.push("".concat(e.response.data[t])):o.push("".concat(t,": ").concat(e.response.data[t]))})),o.map((function(e){t.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:e,timeout:5e3,position:"top"})}))}))},deleteCredential:function(e,t){var o=this;this.$axios.delete("/common/api/credential/".concat(e,"/")).then((function(e){o.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(o.$t("credential.delete_credential_success",{name:t})," !"),timeout:2e3,position:"top"}),o.fetchData()})).catch((function(e){console.log(e);var t=[];e.response.data instanceof Object===!0&&Object.keys(e.response.data).map((function(o){"non_field_errors"===o?t.push("".concat(e.response.data[o])):t.push("".concat(o,": ").concat(e.response.data[o]))})),t.map((function(e){o.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:e,timeout:5e3,position:"top"})}))}))},updateCredential:function(e,t){var o=this;this.$axios.patch("/common/api/credential/".concat(e,"/"),t).then((function(e){o.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(o.$t("credential.update_credential_success",{name:o.name})," !"),timeout:2e3,position:"top"}),o.createcredentialmodal=!1,o.fetchData()})).catch((function(e){console.log(e);var t=[];e.response.data instanceof Object===!0&&Object.keys(e.response.data).map((function(o){"non_field_errors"===o?t.push("".concat(e.response.data[o])):t.push("".concat(o,": ").concat(e.response.data[o]))})),t.map((function(e){o.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:e,timeout:5e3,position:"top"})}))}))}},components:{},created:function(){this.fetchData()}},l=n,c=o("2877"),p=o("eaac"),u=o("9c40"),h=o("2c91"),d=o("27f9"),y=o("0016"),w=o("bd08"),m=o("357e"),f=o("db86"),v=o("74f7"),x=o("24e8"),_=o("f09f"),b=o("a370"),k=o("0378"),g=o("ddd8"),$=o("66e5"),q=o("4074"),P=o("9564"),C=o("7f67"),Q=o("eebe"),S=o.n(Q),N=Object(c["a"])(l,s,r,!1,null,"4e8e6708",null);t["default"]=N.exports;S()(N,"components",{QTable:p["a"],QBtn:u["a"],QSpace:h["a"],QInput:d["a"],QIcon:y["a"],QTr:w["a"],QTh:m["a"],QTd:f["a"],QInnerLoading:v["a"],QDialog:x["a"],QCard:_["a"],QCardSection:b["a"],QForm:k["a"],QSelect:g["a"],QItem:$["a"],QItemSection:q["a"],QToggle:P["a"]}),S()(N,"directives",{ClosePopup:C["a"]})}}]);