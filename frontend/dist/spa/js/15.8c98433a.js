(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"1f6a":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md"},[n("q-table",{attrs:{title:t.$t("command.Command"),data:t.data,columns:t.columns,"row-key":"name",loading:t.loading,filter:t.filter},scopedSlots:t._u([{key:"top",fn:function(e){return[n("q-btn",{attrs:{color:"primary",label:t.$t("command.new"),"no-caps":""},on:{click:t.AddNewCommand}}),n("q-space"),n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:t.$t("Search"),filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}})]}},{key:"header",fn:function(e){return[n("q-tr",{attrs:{props:e}},t._l(e.cols,(function(o){return n("q-th",{key:o.name,attrs:{props:e}},[t._v("\n          "+t._s(o.label)+"\n        ")])})),1)]}},{key:"body-cell-action",fn:function(e){return[n("q-td",{attrs:{props:e}},[n("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"edit"},on:{click:function(n){return t.editRow(e)}}}),n("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"delete"},on:{click:function(n){return t.deleteRow(e)}}})],1)]}},{key:"body-cell-groups",fn:function(e){return[n("q-td",{attrs:{props:e}},t._l(e.row.groups,(function(e,o){return n("a",{key:o},[t._v("\n          "+t._s(e.name)+"\n          "),n("br")])})),0)]}},{key:"body-cell-commands",fn:function(e){return[n("q-td",{attrs:{props:e}},t._l(e.row.commands,(function(e,o){return n("a",{key:o},[t._v("\n          "+t._s(e)+"\n          "),n("br")])})),0)]}},{key:"loading",fn:function(){return[n("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0}])}),n("q-dialog",{attrs:{"full-width":"","full-height":"",maximized:!0},model:{value:t.createcommandmodal,callback:function(e){t.createcommandmodal=e},expression:"createcommandmodal"}},[n("q-card",[n("q-card-section",{staticClass:"row items-center q-pb-none"},[n("div",{staticClass:"text-h6"},[t._v(t._s(t.modaltitle))]),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),n("q-card-section",[n("div",[n("div",{staticClass:"q-pa-md"},[n("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[n("q-input",{attrs:{label:t.$t("command.table.columns.name.name"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("Please type name at least 2 characters")}]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("div",[t._v("\n                "+t._s(t.$t("command.Groups"))+"\n                "),t._l(t.groups,(function(e,o){return n("div",{key:o,staticClass:"row"},[n("div",{staticClass:"col-lg-6"},[n("q-select",{attrs:{"use-input":"","input-debounce":"0",label:t.$t("command.Group"),options:t.groups_list},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[t._v("\n                            No results\n                          ")])],1)]},proxy:!0}],null,!0),model:{value:e.group,callback:function(n){t.$set(e,"group",n)},expression:"line.group"}})],1),n("div",{staticClass:"col-lg-1"},[n("div",{staticClass:"block float-left"},[n("q-btn",{attrs:{round:"",icon:"delete"},on:{click:function(e){return t.removeGroup(o)}}}),o+1===t.groups.length?n("q-btn",{attrs:{round:"",icon:"add"},on:{click:t.addGroup}}):t._e()],1)])])}))],2),n("div",[t._v("\n                "+t._s(t.$t("command.Commands"))+"\n                "),t._l(t.commands,(function(e,o){return n("div",{key:o,staticClass:"row"},[n("div",{staticClass:"col-lg-6"},[n("q-input",{attrs:{label:t.$t("Command name"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("Please type command name at least 2 characters")}]},model:{value:e.command,callback:function(n){t.$set(e,"command",n)},expression:"line.command"}})],1),n("div",{staticClass:"col-lg-1"},[n("div",{staticClass:"block float-left"},[n("q-btn",{attrs:{round:"",icon:"delete"},on:{click:function(e){return t.removeCommand(o)}}}),o+1===t.commands.length?n("q-btn",{attrs:{round:"",icon:"add"},on:{click:t.addCommand}}):t._e()],1)])])}))],2),n("div",[n("q-btn",{attrs:{label:t.$t("Submit"),type:"submit",color:"primary"}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.$t("Reset"),type:"reset",color:"primary",flat:""}})],1)],1)],1)])])],1)],1)],1)},a=[],s=(n("ac6a"),n("cadf"),n("06db"),n("456d"),n("7f7f"),[]),c={name:"Command",watch:{groups:function(){this.blockRemoval=this.groups.length<=1},commands:function(){this.blockCommandsRemoval=this.commands.length<=1}},computed:{modaltitle:{get:function(){return this.create?this.create_title:this.update_title},set:function(t){this.modaltitle=t}}},data:function(){return{columns:[{name:"name",align:"center",label:this.$t("command.table.columns.name.label"),field:"name",sortable:!0},{name:"groups",align:"center",label:this.$t("command.table.columns.groups.label"),field:"groups",sortable:!0},{name:"commands",align:"center",label:this.$t("command.table.columns.commands.label"),field:"commands",sortable:!0},{name:"action",align:"center",label:this.$t("action"),field:"",sortable:!0}],data:[],createcommandmodal:!1,name:null,groups:[],commands:[],groups_list:s,blockRemoval:!0,blockCommandsRemoval:!0,loading:!1,filter:null,create:!0,id:null,create_title:this.$t("command.create_command"),update_title:this.$t("command.update_command")}},methods:{editRow:function(t){var e=this;this.onReset(),this.id=t.row.id,this.create=!1,this.name=t.row.name,this.commands=[],t.row.commands.map((function(t){e.commands.push({command:t})})),this.groups=[],t.row.groups.map((function(t){e.groups.push({group:{label:t.name,value:t.id}})})),this.createcommandmodal=!0},deleteRow:function(t){var e=this;this.$q.dialog({title:this.$t("Confirm"),message:"".concat(this.$t("command.delete_command",{name:t.row.name})," ?"),cancel:!0,persistent:!0,ok:{push:!0,color:"negative"}}).onOk((function(){e.deleteCommand(t.row.id,t.row.name)}))},AddNewCommand:function(){this.onReset(),this.createcommandmodal=!0,this.create=!0},onSubmit:function(){var t=Object();t.name=this.name,t.groups=[],t.commands=[],this.groups.map((function(e){e.group&&e.group.value&&t.groups.push(e.group.value)})),this.commands.map((function(e){e.command&&t.commands.push(e.command)})),t.commands=JSON.stringify(t.commands),this.create?this.createCommand(t):this.updateCommand(this.id,t)},onReset:function(){this.name=null,this.groups=[],this.groups.push({group:null}),this.commands=[],this.commands.push({command:null})},filterFn:function(t,e){var n=this;e((function(){if(""===t)n.groups_list=s;else{var e=t.toLowerCase();n.groups_list=s.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},addGroup:function(){var t=this.groups.filter((function(t){return null===t.number}));t.length>=1&&this.groups.length>0||this.groups.push({group:null})},removeGroup:function(t){this.blockRemoval||this.groups.splice(t,1)},addCommand:function(){var t=this.commands.filter((function(t){return null===t.number}));t.length>=1&&this.commands.length>0||this.commands.push({command:null})},removeCommand:function(t){this.blockCommandsRemoval||this.commands.splice(t,1)},fetchdata:function(){var t=this;t.loading=!0,this.data=[],this.$axios.get("/common/api/commandssequencegroups/").then((function(e){e.data.map((function(e){e.commands=JSON.parse(e.commands),t.data.push(e)})),t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))},fetchGroup:function(){var t=this;this.$axios.get("/common/api/servergroup/").then((function(e){t.groups_list=[],s=[],e.data.map((function(e){t.groups_list.push({label:"".concat(e.name),value:e.id}),s.push({label:"".concat(e.name),value:e.id})}))})).catch((function(t){console.log(t)}))},createCommand:function(t){var e=this,n=this;this.$axios.post("/common/api/commandssequence/",t).then((function(o){n.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(n.$t("command.create_command_success",{name:t.name})," !"),timeout:2e3,position:"top"}),n.createcommandmodal=!1,e.fetchdata()})).catch((function(t){var e=[];t.response.data instanceof Object===!0&&Object.keys(t.response.data).map((function(n){"non_field_errors"===n?e.push("".concat(t.response.data[n])):e.push("".concat(n,": ").concat(t.response.data[n]))})),e.map((function(t){n.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:t,timeout:5e3,position:"top"})}))}))},updateCommand:function(t,e){var n=this,o=this;this.$axios.patch("/common/api/commandssequence/".concat(t,"/"),e).then((function(t){o.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(o.$t("command.update_command_success",{name:e.name})," !"),timeout:2e3,position:"top"}),o.createcommandmodal=!1,n.fetchdata()})).catch((function(t){var e=[];t.response.data instanceof Object===!0&&Object.keys(t.response.data).map((function(n){"non_field_errors"===n?e.push("".concat(t.response.data[n])):e.push("".concat(n,": ").concat(t.response.data[n]))})),e.map((function(t){o.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:t,timeout:5e3,position:"top"})}))}))},deleteCommand:function(t,e){var n=this,o=this;this.$axios.delete("/common/api/commandssequence/".concat(t,"/")).then((function(t){o.$q.notify({type:"positive",textColor:"grey-10",multiLine:!0,message:"".concat(o.$t("command.delete_command_success",{name:e})," !"),timeout:2e3,position:"top"}),n.fetchdata()})).catch((function(t){console.log(t);var e=[];t.response&&t.response.data&&t.response.data instanceof Object===!0&&Object.keys(t.response.data).map((function(n){"non_field_errors"===n?e.push("".concat(t.response.data[n])):e.push("".concat(n,": ").concat(t.response.data[n]))})),e.map((function(t){o.$q.notify({type:"negative",color:"red-5",textColor:"white",multiLine:!0,message:t,timeout:5e3,position:"top"})}))}))}},mounted:function(){this.addGroup(),this.addCommand()},created:function(){this.fetchdata(),this.fetchGroup()}},i=c,l=n("2877"),r=n("eaac"),m=n("9c40"),d=n("2c91"),u=n("27f9"),p=n("0016"),f=n("bd08"),h=n("357e"),g=n("db86"),b=n("74f7"),v=n("24e8"),y=n("f09f"),_=n("a370"),q=n("0378"),C=n("ddd8"),k=n("66e5"),$=n("4074"),w=n("7f67"),x=n("eebe"),Q=n.n(x),R=Object(l["a"])(i,o,a,!1,null,"7dbe1348",null);e["default"]=R.exports;Q()(R,"components",{QTable:r["a"],QBtn:m["a"],QSpace:d["a"],QInput:u["a"],QIcon:p["a"],QTr:f["a"],QTh:h["a"],QTd:g["a"],QInnerLoading:b["a"],QDialog:v["a"],QCard:y["a"],QCardSection:_["a"],QForm:q["a"],QSelect:C["a"],QItem:k["a"],QItemSection:$["a"]}),Q()(R,"directives",{ClosePopup:w["a"]})}}]);